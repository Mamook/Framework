(function(a){a.bsmSelect.plugins.sortable=function(b,c){if(!(this instanceof a.bsmSelect.plugins.sortable))return new a.bsmSelect.plugins.sortable(b,c);this.sortConfig=b;this.options=a.extend({},this.defaultOpt,c||{})};a.extend(a.bsmSelect.plugins.sortable.prototype,{defaultOpt:{listSortableClass:"bsmListSortable"},init:function(b){var c=a.extend({},this.options,b.options),d=a.extend({},this.sortConfig,{items:"."+c.listItemClass}),e=this;b.$list.addClass(c.listSortableClass).sortable(d);(-1<a.inArray(a("html").css("overflow-x"),
["auto","scroll"])||-1<a.inArray(a("html").css("overflow-y"),["auto","scroll"]))&&a("."+c.listSortableClass).addClass("bsmScrollWorkaround");b.$original.bind("change",function(a,c){e.onChange.call(e,b,a,c)});b.$list.bind("sortupdate",function(a,c){e.onSort.call(e,b,a,c)})},onChange:function(a,c,d){d&&("add"===d.type&&!a.buildingSelect)&&(d.option.detach()["top"===a.options.addItemTarget?"prependTo":"appendTo"](a.$original),a.$list.sortable("refresh"))},onSort:function(b,c,d){a("."+b.options.listItemClass,
b.$list).each(function(){a(this).data("bsm-option").data("orig-option").detach().appendTo(b.$original)});b.triggerOriginalChange(a(d.item).data("bsm-option").data("orig-option"),"sort")}})})(jQuery);